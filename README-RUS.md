# Alto Analyser

**Alto Analyser** — это приложение на Python, предназначенное для эффективного анализа [**коллекции оцифрованных книг XIX века**](https://bl.iro.bl.uk/collections/b7fd2482-debd-4495-9494-72aa2ead00bb) 
из **Британской библиотеки** в формате [**Analyzed Layout and Text Object (ALTO)**](https://en.wikipedia.org/wiki/Analyzed_Layout_and_Text_Object).  
Этот проект создан для того, чтобы его было легко настроить, запустить и адаптировать под ваши потребности.

---

## Возможности

- **Эффективный анализ архивов**: Выполняйте анализ архивов ALTO за десятилетия без необходимости их распаковки.
- **Фильтрация токенов**: Отфильтровывайте токены на основе уровня уверенности OCR для получения точных результатов.
- **Анализ на основе белого списка**: Анализируйте соседние токены только для указанных пользователем токенов, что обеспечивает целенаправленный анализ.
- **Настраиваемая фильтрация**:
  - Укажите собственный список слов, которые нужно исключить из анализа.
  - Настройте пороговые значения фильтрации токенов на основе уверенности OCR.
- **Полная метрика токенов**:
  - Подсчет всех токенов.
  - Расчет частоты и вероятности токенов.
- **Анализ соседних токенов в заданном окне**:
  - Определяйте и анализируйте наиболее вероятные соседние токены в настраиваемом окне.

---

## Содержание

- [Общее описание](#общее-описание)
- [Установка](#установка)
- [Конфигурация](#конфигурация)
- [Запуск приложения](#запуск-приложения)
- [Производительность](#производительность)
- [Лицензия](#лицензия)

---

## Общее описание

`Alto Analyser` — инструмент, разработанный для анализа оцифрованных книг в формате ALTO.  
Поддерживает входные данные в формате .zip и вывод в формате .sqlite.

---

## Установка

Для начала работы с `Alto Analyser` выполните следующие шаги:

1. **Установите Python**  
   - Проверьте, установлен ли Python:  
     Откройте терминал и выполните:  
     ```bash
     python3 --version
     ```  
     Если Python установлен, вы увидите номер версии. Если нет, выполните следующие шаги.

   - Установите Python через Homebrew (рекомендуется для macOS):  
     ```bash
     brew install python
     ```

   - Для Windows и других систем загрузите установщик Python с [официального сайта](https://www.python.org/downloads/) и следуйте инструкциям.

2. **Клонируйте репозиторий**:  
   ```bash
   git clone https://github.com/akriuchk/alto-analyzer.git
   ```
   
3. **Перейдите в директорию проекта**:
   ```bash
   cd alto
   ```

4. **Создайте и активируйте виртуальное окружение (необязательно, но рекомендуется)**:

   ```bash
   python -m venv venv
   source venv/bin/activate # For Linux/Mac
   venv\Scripts\activate # For Windows
   ```
5. **Установите необходимые зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

## Конфигурация

Перед запуском **Alto Analyser** настройте параметры в файле [config.py](src/config.py).

Откройте файл и измените настройки:

    self.archive_path = 'data/in/1820_1829.zip'  # Вы можете создать папки 'data' и 'in' или указать путь к архиву ALTO.
    self.decade = '1820_1829'  # Параметр, используемый для выходных данных.
    self.windows = {3, 5}  # Список размеров окон для анализа соседей.
    self.words_for_analysis = {'when', 'under', 'kind'}  # Список слов для анализа. Допускается до 100 слов (не протестировано больше).
    # И многое другое, включая настройки параллелизации, кеширования и оптимизации памяти.

Сохраните и закройте файл.

## Запуск приложения

Для запуска **Alto Analyser:**

Убедитесь, что зависимости установлены, а конфигурация завершена.
Запустите приложение:

```bash
source venv/bin/activate && python src/main.py
# или просто
python src/main.py
```

Следите за выводом в терминале для получения логов или сообщений об ошибках.

Результат будет доступен в папке `self.output_path`, в файле базы данных `self.decade`.sqlite

## Производительность

С настройками по умолчанию на MacBook M1 Pro архив объемом 10 ГБ анализируется за 1 час 20 минут, 
скорость обработки ~10 тыс. строк в секунду.